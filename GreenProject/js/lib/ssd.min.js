/*!create by scy 2016-08-25*/
ol.source.getBaseLayer=function(a,b){var c,d;switch(a){case"天地图":case"天地":case"tiandi":case"tianditu":switch(b){case"矢量":case"路网":case"道路":d="http://t3.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}";break;case"影像":case"遥感":case"卫星":d="http://t3.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}";break;case"地形":case"地形图":case"高程图":d="http://t3.tianditu.com/DataServer?T=ter_c&x={x}&y={y}&l={z}";break;case"标注":case"中文标注":case"名称":case"路网标注":case"道路标注":d="http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}";break;case"影像标注":d="http://t3.tianditu.com/DataServer?T=cia_w&x={x}&y={y}&l={z}";break;case"地形标注":d="http://t3.tianditu.com/DataServer?T=cta_w&x={x}&y={y}&l={z}";break;default:d="http://t3.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}"}break;case"谷歌地图":case"谷歌":case"google":case"google map":switch(b){case"矢量":case"路网":case"道路":d="http://mt2.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}";break;case"影像":case"遥感":case"卫星":d="http://mt2.google.cn/vt/lyrs=s&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}";break;case"地形":case"地形图":case"高程图":d="http://mt2.8google.cn/vt/lyrs=p&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}";break;case"标注":d="http://mt2.8google.cn/vt/lyrs=h&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}";break;default:d="http://mt2.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}"}break;case"百度地图":case"百度":case"baidu":case"baidu map":return c=ol.source.getBaiduLayer(b);default:d="http://mt2.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}"}return c=new ol.layer.Tile({source:new ol.source.XYZ({url:d}),zIndex:-1})},ol.source.getBaiduLayer=function(a){for(var b,c=ol.proj.get("EPSG:3857"),d=[],e=0;22>e;e++)d[e]=Math.pow(2,18-e);var f=new ol.tilegrid.TileGrid({origin:[0,0],resolutions:d});return b=new ol.layer.Tile({source:new ol.source.TileImage({projection:c,tileGrid:f,tileUrlFunction:function(b,c,d){if(!b)return"";var e=b[0],f=b[1],g=b[2];switch(0>f&&(f="M"+-f),0>g&&(g="M"+-g),a){case"矢量":case"路网":case"道路":layerurl="http://online3.map.bdimg.com/onlinelabel/?qt=tile&udt=20160514&styles=pl&scaler=1&p=1&x="+f+"&y="+g+"&z="+e;break;case"影像":case"遥感":case"卫星":layerurl="http://shangetu1.map.bdimg.com/it/u=x="+f+";y="+g+";z="+e+";v=009;type=sate&fm=46&udt=20150601";break;default:layerurl="http://online3.map.bdimg.com/onlinelabel/?qt=tile&udt=20160514&styles=pl&scaler=1&p=1&x="+f+"&y="+g+"&z="+e}return layerurl}})})};
/*!create by scy 2016-11-11*/
ol.control.initLayerSwitcher=function(a,b,c,d){var e,f,g;"offline"==b?(e=ol.source.getBaseLayer("离线","地形",c.outlineterrainurl),f=ol.source.getBaseLayer("离线","影像",c.outlinesateurl),g=ol.source.getBaseLayer("离线","矢量",c.outlineroadurl)):(e=ol.source.getBaseLayer("谷歌","地形"),f=ol.source.getBaseLayer("谷歌","影像"),g=ol.source.getBaseLayer("谷歌","矢量")),a.addLayer(e),a.addLayer(f),a.addLayer(g),e.setVisible(!1),f.setVisible(!1),g.setVisible(!1);var h=$('<div id="layerswitcher"></div>').appendTo($("#map")[0]);switch($('<div class="noneMap" title="不显示底图"><span class="lsBody"><span class="lsBackground"></span><span class="lsLabel">无底图</span></span></div>').appendTo(h[0]),$('<div class="vecMap" title="显示普通地图"><span class="lsBody"><span class="lsBackground"></span><span class="lsLabel">地图</span></span></div>').appendTo(h[0]),$('<div class="terMap" title="显示地形图"><span class="lsBody"><span class="lsBackground"></span><span class="lsLabel">地形</span></span></div>').appendTo(h[0]),$('<div class="imgMap" title="显示影像图"><span class="lsBody"><span class="lsBackground" ></span><span class="lsLabel">影像</span></span></div>').appendTo(h[0]),$(".terMap,.imgMap,.vecMap,.noneMap").click(function(b){ol.control.changeBaseLayer(b.currentTarget,a,[e,f,g])}),d){case"地形":e.setVisible(!0),$(".terMap").css("display","block");break;case"矢量":g.setVisible(!0),$(".vecMap").css("display","block");break;case"影像":f.setVisible(!0),$(".imgMap").css("display","block")}},ol.control.changeBaseLayer=function(a,b,c){var d=c[0],e=c[1],f=c[2];$(a).hasClass("vecMap")?(d.setVisible(!0),e.setVisible(!1),f.setVisible(!1),$(".terMap").css("display","block"),$(".vecMap").css("display","none"),$(".imgMap").css("display","none"),$(".noneMap").css("display","none")):$(a).hasClass("terMap")?(d.setVisible(!1),e.setVisible(!0),f.setVisible(!1),$(".terMap").css("display","none"),$(".vecMap").css("display","none"),$(".imgMap").css("display","block"),$(".noneMap").css("display","none")):$(a).hasClass("imgMap")?(d.setVisible(!1),e.setVisible(!1),f.setVisible(!1),$(".terMap").css("display","none"),$(".vecMap").css("display","none"),$(".imgMap").css("display","none"),$(".noneMap").css("display","block")):$(a).hasClass("noneMap")&&(d.setVisible(!1),e.setVisible(!1),f.setVisible(!0),$(".terMap").css("display","none"),$(".vecMap").css("display","block"),$(".imgMap").css("display","none"),$(".noneMap").css("display","none"))};
/*!create by scy 2016-11-11*/
ol.control.CanvasLegend=function(a){a||(a={}),a.style||(a.style=new ol.style.Style),this.setStyle(a.style);var b=$("<div>").text(this.text_).addClass("ol-title ol-unselectable").css({font:this.font_,position:"absolute",top:0,left:0,right:0,display:"block",visibility:"hidden"});ol.control.Control.call(this,{element:b.get(0),target:a.target})},ol.inherits(ol.control.CanvasLegend,ol.control.Control),ol.control.CanvasLegend.prototype.setMap=function(a){var b=this.getMap();b&&b.un("postcompose",this.drawTitle_,this),ol.control.Control.prototype.setMap.call(this,a),b&&b.renderSync(),a&&a.on("postcompose",this.drawTitle_,this)},ol.control.CanvasLegend.prototype.setStyle=function(a){var b=a.getText();this.font_=b?b.getFont()||"20px Arial":"20px Arial",this.text_=b?b.getText():"";var c=b?b.getStroke():null,d=b?b.getFill():null;this.strokeStyle_=c?ol.color.asString(c.getColor()):"#fff",this.fillStyle_=d?ol.color.asString(d.getColor()):"#000",this.element&&$(this.element).text(this.text_).css({font:this.font_}),this.getMap()&&this.getMap().render()},ol.control.CanvasLegend.prototype.setTitle=function(a){this.text_=a,$(this.element).text(a),this.getMap()&&this.getMap().renderSync()},ol.control.CanvasLegend.prototype.getTitle=function(a){return this.text_},ol.control.CanvasLegend.prototype.setVisible=function(a){a?$(this.element).show():$(this.element).hide(),this.getMap()&&this.getMap().renderSync()},ol.control.CanvasLegend.prototype.getVisible=function(a){return"none"!=$(this.element).css("display")},ol.control.CanvasLegend.prototype.drawTitle_=function(a){if(this.getVisible()&&this.text_){var b=a.context,c=a.frameState.pixelRatio;b.save(),b.scale(c,c);var d=JSON.parse(this.text_),e=d.rendercolor,f=b.canvas.width/c,g=b.canvas.height/c,h=30*(e.length+1),i=100,j={top:g-h,left:f-i};b.beginPath(),b.rect(j.left-70,j.top-20,i+30,h+10),b.lineWidth=1,b.strokeStyle="#ccc",b.stroke(),b.closePath(),b.beginPath(),b.fillStyle=this.fillStyle_,b.textAlign="center",b.textBaseline="middle",b.font=this.font_,b.fillText(d.title?d.title:"图例",j.left,j.top),b.closePath(),e[0][2]?$.each(e,function(a,c){var d,e=j.left,f=j.top+30*a;d="min"==c[0]?"<"+c[1]:"max"==c[1]?">="+c[0]:c[0]+"-"+c[1],b.beginPath(),b.fillStyle=c[2],b.fillRect(e-50,f+20,30,20),b.rect(e-50,f+20,30,20),b.lineWidth=.25,b.strokeStyle="#000",b.stroke(),b.fillStyle="#000",b.font="bold 14px 宋体",b.fillText(d,e+20,f+30),b.closePath()}):$.each(e,function(a,c){var d,e=j.left,f=j.top+30*a;d=c[0],b.beginPath(),b.fillStyle=c[1],b.fillRect(e-50,f+20,30,20),b.rect(e-50,f+20,30,20),b.lineWidth=.25,b.strokeStyle="#000",b.stroke(),b.fillStyle="#000",b.font="bold 14px 宋体",b.fillText(d,e+20,f+30),b.closePath()}),b.restore()}};
/*!create by scy 2016-11-11*/
ol.control.CanvasTitle=function(a){a||(a={}),a.style||(a.style=new ol.style.Style),this.setStyle(a.style);var b=$("<div>").text(this.text_).addClass("ol-title ol-unselectable").css({font:this.font_,position:"absolute",top:0,left:0,right:0,display:"block",visibility:"hidden"});ol.control.Control.call(this,{element:b.get(0),target:a.target})},ol.inherits(ol.control.CanvasTitle,ol.control.Control),ol.control.CanvasTitle.prototype.setMap=function(a){var b=this.getMap();b&&b.un("postcompose",this.drawTitle_,this),ol.control.Control.prototype.setMap.call(this,a),b&&b.renderSync(),a&&a.on("postcompose",this.drawTitle_,this)},ol.control.CanvasTitle.prototype.setStyle=function(a){var b=a.getText();this.font_=b?b.getFont()||"20px Arial":"20px Arial",this.text_=b?b.getText():"";var c=b?b.getStroke():null,d=b?b.getFill():null;this.strokeStyle_=c?ol.color.asString(c.getColor()):"#fff",this.fillStyle_=d?ol.color.asString(d.getColor()):"#000",this.element&&$(this.element).text(this.text_).css({font:this.font_}),this.getMap()&&this.getMap().render()},ol.control.CanvasTitle.prototype.setTitle=function(a){this.text_=a,$(this.element).text(a),this.getMap()&&this.getMap().renderSync()},ol.control.CanvasTitle.prototype.getTitle=function(a){return this.text_},ol.control.CanvasTitle.prototype.setVisible=function(a){a?$(this.element).show():$(this.element).hide(),this.getMap()&&this.getMap().renderSync()},ol.control.CanvasTitle.prototype.getVisible=function(a){return"none"!=$(this.element).css("display")},ol.control.CanvasTitle.prototype.drawTitle_=function(a){if(this.getVisible()){var b=a.context,c=a.frameState.pixelRatio;b.save(),b.scale(c,c);var d=b.canvas.width/c,e=$(this.element).height(),f={top:0,left:d/2};b.beginPath(),b.fillStyle=this.fillStyle_,b.textAlign="center",b.textBaseline="middle",b.font=this.font_,b.fillText(this.text_,f.left,f.top+e/2),b.closePath(),b.restore()}};
/*!create by scy 2016-11-11*/
ol.control.Contour=function(a){this.url=a.url,this.type=a.type,this.features=a.features,this.fieldname=a.fieldname,this.citycode=a.citycode,this.inter=a.inter,this.width=a.width,this.height=a.height},ol.control.Contour.prototype.createContour=function(a){if(void 0!=this.url&&void 0!=this.features&&void 0!=this.fieldname){for(var b=new Array,c=this.features.length,d=new Array,e=0;c>e;e++){var f=this.features[e];if(f.get("features"))for(var g=0;g<f.get("features").length;g++){var h=f.get("features")[g];if(h.getGeometry().constructor==ol.geom.Point&&"999.9"!=h.get(this.fieldname)){var i=new Array;i.push(h.getGeometry().getCoordinates()[0]),i.push(h.getGeometry().getCoordinates()[1]),i.push(h.get(this.fieldname)),-1==d.indexOf(h.get(this.fieldname))&&"999.9"!=h.get(this.fieldname)&&d.push(h.get(this.fieldname)),b.push(i)}}else{if(f.get("longitude")){var i=new Array;i.push(f.get("longitude")),i.push(f.get("latitude")),i.push(f.get("value")),b.push(i)}if(f.getGeometry().constructor!=ol.geom.Point||"999.9"==f.get(this.fieldname))continue;var i=new Array;i.push(f.getGeometry().getCoordinates()[0]),i.push(f.getGeometry().getCoordinates()[1]),i.push(f.get(this.fieldname)),-1==d.indexOf(f.get(this.fieldname))&&"999.9"!=f.get(this.fieldname)&&d.push(f.get(this.fieldname)),b.push(i)}}d.sort(),d=this.inter?this.inter:d;var j={service:"c_server",request:"GetCountour",width:this.width?this.width:50,height:this.height?this.height:50,inter_values:d.join(","),version:"1.0.0",contourType:this.type?this.type:"polygon",citycode:this.citycode?this.citycode:"0",points:b.join(",")};$.ajax({type:"post",data:j,url:this.url,success:function(b){a(b)},error:function(a,b,c){}})}};
/*!create by scy 2016-11-11*/
ol.source.createGeoWMSMap=function(a,b,c,d,e){var f=new ol.layer.Image({source:new ol.source.ImageWMS({url:b,params:{LAYERS:c}}),name:"baselayer"}),g=new ol.View({center:d,zoom:e,projection:"EPSG:4326"}),h=new ol.Map({logo:{href:"http://www.ssd.net.cn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAnCAYAAACSamGGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDM0MiwgMjAxMC8wMS8xMC0xODowNjo0MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2MkUwMjc4MTVFQkIxMUU2QjIwQjk3NEM5QTFFRTZFQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2MkUwMjc4MjVFQkIxMUU2QjIwQjk3NEM5QTFFRTZFQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjYyRTAyNzdGNUVCQjExRTZCMjBCOTc0QzlBMUVFNkVDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjYyRTAyNzgwNUVCQjExRTZCMjBCOTc0QzlBMUVFNkVDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++jSynwAACUhJREFUeNrMWXt0VEcd/u7dm+wmWfIkCYTQkAQICQLhUZQAUsRy0BxFKS0WKtW2pwg9lXos2B6xKH3go9B6VCLUgg9KS+tRWkqRQmOrHCoIiJBAwBDyME/Ic5Pse9dvJneT3SSbvfQvZ8/HbO7dmfnN7/f9HjMofr8f/+9NE/9krH77k4xNJz5HLCCmEya9D7R/6f054hRRSty63UUaDizvE1JRlNsZt4jYRBRH+N2CoH4j4SWOEM8TZ25nQbWvU4yggHiX+JAoNjgmGNS08mXiNPEWMdHYOF1IockIeI4oJ4qDnws2O90+9Di8Er1OL7w+Tsp3Pr50uAbe2fld0F8fu5KoIJ6KtHY/J0doVuL3xFcDD8QwIZzD5YXFbMKdk5ORlmSG1+uXz6/UdqGqsQcp8dHyXZI1moL74KHUZTc60dbtkpvQObydoIWwjrCP6DiKog73LpX4gJg28IjaozqcHh+WF2XiobsnQDP1aW1uXhIOn27Ctteu4JtLc7BmcSY8ZGF0lIrC3AT87kQtymu6uUMVihriA18n8oilRGdYIQO2D2oJxPuhAvZp0Onx46GlEyhIFn75ThWOnGnC5nsnobq5F4+XXMDT9+Xhi3PHYPvBq/h72S28tG4G+1a8cLACJm7IZDLpM4W0ucRRYslwGu1ToVB/KHYThYOfe2jS7PQ4KeTmV8vwm2PViIvRMC8/BSXvVWF6dqIUcO2Oczj0cSPGpsQgKy0W+47XSH6ZVFX3B2U4zCNeHvI8jOOsJlYNR2I/V5iaFY+mdgfO/qcT8bFRiNZUyTGb3Ys5k5NQXmvD9YYeWCm8WTNJeri4OVVVjDjoo4OdM0iTagDRxPagv4egl14azcUtlihpusYONyop1P2LxqOjxwMzOahFadA0Ddeb7ehx+rBifgZsDj9GmjcIPyVM/X/3a3Lgs5G4Q8HwH43aKK/tRpxFw+ycBLi9ffTaeagKy2anoTA7ASmjzJg0Ng4uNx2MePFPlXh02QQ8cNd4dNsZn/zhZu//FBAPB/4abO6YSHFLo2mb251462QDNq3Mpbk1aepr1OR3XinHp6ckYRY9eePyHGlesanTVzuwae9l+fu1SzIZL72SaxHM/gxhCjG3X/CNPCSS9e9yIv8gCPVbzBr2fVCPpjYXdm2YTrNTUDrExepuPFZSjpqbdty3MANb7p/MHEO+0nLHL7Tiyb1X8MRXclA0NUVGCP8w8wdhHFHsD3EcdsRKve+HiGkOpx+95FOvsw9ON5hBfFhfchm3utzY/dh0ZKXGMR5q5KYdz79RibIaG6NALHY8XMBgboaF7z661I4/lNZj3bIsahMDc7J3uftkUEPXX6XoLqPpjmPSC4f+5qRH5qRZsKIoHT5Ga5Hu+kM6N+hiOqxibLx75mjs3TgNa3ZeQkObE+dv9KCz10tauHAPx45m5vnWrssc5MXhM7fwtc+OxbMPTJKpUlAlSmNk6PVg/0dNnNMbXOwsCgnm5PI0PQUOBFBuosXmZmpLxMKCxLB5U+Tj9MRoPLJ0HJ45UAmP38eUGIX5+ePk+yUzUrBywRjG0Tq+8yM1wYxvfykrZI6XD9eg2+mhwCGZT0yQTdzQHUfNE6kxGBrDi43euGnfNdTddIQVMrDxz0xJZLBX8IVZqcgbFxfym1k58RTARC1mICE2tFw4eo5Z6e06uZ46SAYh10Duhpo6nACWKIUmdeIHB6qwe8MUGQMDzUXy+6iZQBpOiotCyfp8FM8ZDY9wjKDUl50ew/H5WDYrBcGla3WLAz98oxpuDzi3KVz9EBBSsYZTU5xZ5W5bsef9BjxenNn/qozFwrNvVsPKSkiEGxMRZzGh9GKHTJ/B+d5LTmemmGn65AHOk9PbKOCNJruMu0r4KizgOBjRnGKXvzpSj5nZVizQ+VkwPg456Ra8eqJRBl2hdX+Q+QMVk6gj47iRnzyYG2LqPccacPT8rT4BFSOVuaJ0hkn6Ehr5JDx26+vVaOpwySFeCrBlVTZ+vX4KivITZIpU1AE+iXGxFGBFURpef7JA9kJg0U5e6cIv3msgTzU5ZoS1O4NDUH2kc4ZY8FqTE2teqkAuOeZhIetgXk5nwfuNJRmw0tRX6nrQxvwteJqRbEbuGAtutDix/2838cqJZub8Pm1frO6Bg7FR6/fmsKqsDyp6latGDkRRrAfL63pROMGKBxdnSDOWUbBLNT146p7x9OwkyUdRCItWUW/HP67asHZxOtISotFu8+C5P9YynroRa1aNLCnlUgRvctefFd9bAt40UhO/H8UyTGgpZZSGyRmxmJNrRTs1eL7KhlZmIRGQs1ItKMyxSqFPVXRSMBcrJheLYycjg8/ICbWSmHS9ZE5/CBLdcWJ1pJFi7labF5nJfiyfm4qaFjsdoB3JVg13ToynA6nSeMLsp8g9IeTU8VZMyfRjx6EG2J2QMdNAO96/ptDMxA3yHC/O0e8aPQuLNDkmMQrz8qwyDoqYeZOaEhlIxEgREVL5vpd5/jIpcvZ6t0wOgoYG70yKiI8rd80MpEWpyb/oKp5oZAYxpKnTQ4fRCFEdqdRWDFo6ReGrICHGhAbmb8FbX51CzfrkocxnTMALQsBBp0XJD1HCbiVeMyQkh5BaOHaxC3dNHSU9VxQMo+M1ebz9N51EOFpjuxtnKnukgKrxm5ItQ+JkULF5gDhn4CwiEcV68b9tQohezM+Lx/SsWHT1+uRRdmH+KBns/1pu45HDLw9hBuctJY4MvRzwh+zwCeJD/fAescWQe41tHgbnZnx+Rjym3REDB1V8qqIHpZe6AF9fhW6QiCJTfDfM5UCIkCeJHxPfN2R2cZvBs0xdqxuLPxXPGBojn/c4WlFT6oYlWoVq/D7saZ2Pw11YDWmCmweNziz42EEzf29/PTp5tD1LDr74TrMsaG/jwm4PsTPsDYZfHSKrcKK1uslXGtGmxQxcrnfiR282oZ487bT7mVVMRsPNb4kNI98FDZ87BT/u1c3+nCF+Rms49E+brOpjmcuFhBEU6dU5+POIN70RUpS49OQhBbuNpE1NC9ryyBKK4uERPT4buUSN2P5M5Ohc7Y5k+ghNlF+bRV42IuBIF1bDoZvYRuTofa3BcQFcJbbo439G2A2NG+DkbbWbuka36veK4k58tu5khXov+HxJ78/pYa3yk/7vw/8EGACjq1uiQYi8HgAAAABJRU5ErkJggg=="},controls:[new ol.control.ScaleLine,new ol.control.Attribution],view:g,layers:[f],target:a});return h};
/*!create by scy 2016-11-11*/
ol.layer.TileBaseLayer=function(a,b,c){var d=ol.source.getBaseLayerSource(a,b,c),e=new ol.layer.Tile({source:d,layerid:"baselayer",layername:"底图"});return e},ol.layer.WMSBaseLayer=function(a,b){var c=new ol.layer.Image({source:new ol.source.ImageWMS({url:a,params:{LAYERS:b}}),layerid:"baselayer",layername:"底图"});return c};
/*!create by scy 2016-11-11*/
ol.control.LayerSwitcher=function(a){var b=a||{},c=b.tipLabel?b.tipLabel:"Legend";this.mapListeners=[],this.hiddenClassName="ol-unselectable ol-control layer-switcher",ol.control.LayerSwitcher.isTouchDevice_()&&(this.hiddenClassName+=" touch"),this.shownClassName=this.hiddenClassName+" shown";var d=document.createElement("div");d.className=this.hiddenClassName;var e=document.createElement("button");e.setAttribute("title",c),d.appendChild(e),this.panel=document.createElement("div"),this.panel.className="panel",d.appendChild(this.panel),ol.control.LayerSwitcher.enableTouchScroll_(this.panel);var f=this;e.onmouseover=function(a){f.showPanel()},e.onclick=function(a){a=a||window.event,f.showPanel(),a.preventDefault()},f.panel.onmouseout=function(a){a=a||window.event,f.panel.contains(a.toElement||a.relatedTarget)||f.hidePanel()},ol.control.Control.call(this,{element:d,target:b.target})},ol.inherits(ol.control.LayerSwitcher,ol.control.Control),ol.control.LayerSwitcher.prototype.showPanel=function(){this.element.className!=this.shownClassName&&(this.element.className=this.shownClassName,this.renderPanel())},ol.control.LayerSwitcher.prototype.hidePanel=function(){this.element.className!=this.hiddenClassName&&(this.element.className=this.hiddenClassName)},ol.control.LayerSwitcher.prototype.renderPanel=function(){for(this.ensureTopVisibleBaseLayerShown_();this.panel.firstChild;)this.panel.removeChild(this.panel.firstChild);var a=document.createElement("ul");this.panel.appendChild(a),this.renderLayers_(this.getMap(),a)},ol.control.LayerSwitcher.prototype.setMap=function(a){for(var b=0;b<this.mapListeners.length;b++)this.getMap().unByKey(this.mapListeners[b]);if(this.mapListeners.length=0,ol.control.Control.prototype.setMap.call(this,a),a){var c=this;this.mapListeners.push(a.on("pointerdown",function(){c.hidePanel()})),this.renderPanel()}},ol.control.LayerSwitcher.prototype.ensureTopVisibleBaseLayerShown_=function(){var a;ol.control.LayerSwitcher.forEachRecursive(this.getMap(),function(b,c,d){"base"===b.get("type")&&b.getVisible()&&(a=b)}),a&&this.setVisible_(a,!0)},ol.control.LayerSwitcher.prototype.setVisible_=function(a,b){var c=this.getMap();a.setVisible(b),b&&"base"===a.get("type")&&ol.control.LayerSwitcher.forEachRecursive(c,function(b,c,d){b!=a&&"base"===b.get("type")&&b.setVisible(!1)})},ol.control.LayerSwitcher.prototype.renderLayer_=function(a,b){var c=this,d=document.createElement("li"),e=a.get("title"),f=ol.control.LayerSwitcher.uuid(),g=document.createElement("label");if(a.getLayers&&!a.get("combine")){d.className="group",g.innerHTML=e,d.appendChild(g);var h=document.createElement("ul");d.appendChild(h),this.renderLayers_(a,h)}else{d.className="layer";var i=document.createElement("input");"base"===a.get("type")?(i.type="radio",i.name="base"):i.type="checkbox",i.id=f,i.checked=a.get("visible"),i.onchange=function(b){c.setVisible_(a,b.target.checked)},d.appendChild(i),g.htmlFor=f,g.innerHTML=e,d.appendChild(g)}return d},ol.control.LayerSwitcher.prototype.renderLayers_=function(a,b){for(var c,d=a.getLayers().getArray().slice().reverse(),e=0;e<d.length;e++)c=d[e],c.get("title")&&b.appendChild(this.renderLayer_(c,e))},ol.control.LayerSwitcher.forEachRecursive=function(a,b){a.getLayers().forEach(function(a,c,d){b(a,c,d),a.getLayers&&ol.control.LayerSwitcher.forEachRecursive(a,b)})},ol.control.LayerSwitcher.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},ol.control.LayerSwitcher.enableTouchScroll_=function(a){if(ol.control.LayerSwitcher.isTouchDevice_()){var b=0;a.addEventListener("touchstart",function(a){b=this.scrollTop+a.touches[0].pageY},!1),a.addEventListener("touchmove",function(a){this.scrollTop=b-a.touches[0].pageY},!1)}},ol.control.LayerSwitcher.isTouchDevice_=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}};
/*!create by scy 2016-11-11*/
ol.control.Legend=function(a){var b=a?a:{},c=void 0!==b.className?b.className:"ol-legend";this.innerElement_=document.createElement("DIV"),this.innerElement_.className=c+"-inner",this.element_=document.createElement("DIV"),this.element_.className=c+" ol-unselectable",this.element_.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==b.minWidth?b.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="";var d=b.render?b.render:ol.control.Legend.render;ol.control.Control.call(this,{element:this.element_,render:d,target:b.target})},ol.inherits(ol.control.Legend,ol.control.Control),ol.control.Legend.LEADING_DIGITS=[1,2,5],ol.control.Legend.prototype.getJson=function(){},ol.control.Legend.render=function(a){var b=a.frameState;b?this.viewState_=b.viewState:this.viewState_=null},ol.control.Legend.prototype.handleJsonChanged_=function(){this.updateElement_()},ol.control.Legend.prototype.setJson=function(a){this.legendjson=a,this.updateElement_(),this.changed()},ol.control.Legend.prototype.updateElement_=function(){var a=this.legendjson;if(void 0==a)return!1;var b,c=a.title;switch(b="<div style='font-size:15px'>"+c+"</div><table><tbody>",a.featuretype){case"linestring":for(var d=0;d<a.items.length;d++)b+="<tr style='padding:3px'>",b+="<td style='width:30px;height:30px;'><div style='width:30px;height:3px;background-size:100%;background:"+a.items[d].content+"'</td>",b+="<td>"+a.items[d].label+"</td>",b+="</tr>";break;case"点":for(var d=0;d<a.items.length;d++)b+=(d+2)%2==0?"<tr style='margin:3px'>":"<tr style='margin:3px;background-color: #337AB7;opacity=0.65' >",b+="<td ><div style='margin:3px;width:16px;height:16px;background-size:100%;background:"+a.items[d].content[0]+";background-image:url("+a.items[d].content[0]+");background-repeat: no-repeat;background-position:center'</td>",b+="<td ><div style='margin:3px;width:16px;height:16px;background-size:100%;background:"+a.items[d].content[1]+";background-image:url("+a.items[d].content[1]+");background-repeat: no-repeat;background-position:center'</td>",b+="<td style='padding:3px'>"+a.items[d].label+"</td>",b+="</tr>";break;case"linearring":for(var d=0;d<a.items.length;d++)b+="<tr style='margin:3px'>",b+="<td ><div style='margin:3px;width:30px;height:30px;background-size:100%;background:"+a.items[d].content+";background-image:"+a.items[d].content+";background-repeat: no-repeat;'</td>",b+="<td style='padding:3px'>"+a.items[d].label+"</td>",b+="</tr>";break;default:for(var d=0;d<a.items.length;d++)b+="<tr style='margin:3px'>",b+="<td ><div style='margin:3px;width:30px;height:30px;background-size:100%;background:"+a.items[d].content+";background-image:"+a.items[d].content+";background-repeat: no-repeat;'</td>",b+="<td style='padding:3px'>"+a.items[d].label+"</td>",b+="</tr>"}b+="</tbody></table>";var e=b;this.renderedHTML_!=e&&(this.innerElement_.innerHTML=e,this.renderedHTML_=e),this.renderedWidth_&&(this.innerElement_.style.width="100px",this.renderedWidth_=100),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)};
/*!create by scy 2016-11-11*/
ol.source.getBaseLayer=function(a,b,c){var d,e;switch(a){case"天地图":case"天地":case"tiandi":case"tianditu":switch(b){case"矢量":case"路网":case"道路":e="http://t3.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}";break;case"影像":case"遥感":case"卫星":e="http://t3.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}";break;case"地形":case"地形图":case"高程图":e="http://t3.tianditu.com/DataServer?T=ter_c&x={x}&y={y}&l={z}";break;case"标注":case"中文标注":case"名称":case"路网标注":case"道路标注":e="http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}";break;case"影像标注":e="http://t3.tianditu.com/DataServer?T=cia_w&x={x}&y={y}&l={z}";break;case"地形标注":e="http://t3.tianditu.com/DataServer?T=cta_w&x={x}&y={y}&l={z}";break;default:e="http://t3.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}"}break;case"谷歌地图":case"谷歌":case"google":case"google map":switch(b){case"矢量":case"路网":case"道路":e="http://mt2.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}";break;case"影像":case"遥感":case"卫星":e="http://mt2.google.cn/vt/lyrs=s&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}";break;case"地形":case"地形图":case"高程图":e="http://mt2.google.cn/vt/lyrs=p&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}";break;case"标注":e="http://mt2.google.cn/vt/lyrs=h&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}";break;default:e="http://mt2.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}"}break;case"离线地图":case"离线":e=c;break;case"百度地图":case"百度":case"baidu":case"baidu map":return d=ol.source.getBaiduLayer(b);default:e="http://mt2.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}"}return d=new ol.layer.Tile({source:new ol.source.XYZ({url:e,crossOrigin:"anonymous"}),zIndex:-1})},ol.source.getBaiduLayer=function(a){for(var b,c=ol.proj.get("EPSG:3857"),d=[],e=0;22>e;e++)d[e]=Math.pow(2,18-e);var f=new ol.tilegrid.TileGrid({origin:[0,0],resolutions:d});return b=new ol.layer.Tile({source:new ol.source.TileImage({projection:c,tileGrid:f,tileUrlFunction:function(b,c,d){if(!b)return"";var e=b[0],f=b[1],g=b[2];switch(0>f&&(f="M"+-f),0>g&&(g="M"+-g),a){case"矢量":case"路网":case"道路":layerurl="http://online3.map.bdimg.com/onlinelabel/?qt=tile&udt=20160514&styles=pl&scaler=1&p=1&x="+f+"&y="+g+"&z="+e;break;case"影像":case"遥感":case"卫星":layerurl="http://shangetu1.map.bdimg.com/it/u=x="+f+";y="+g+";z="+e+";v=009;type=sate&fm=46&udt=20150601";break;default:layerurl="http://online3.map.bdimg.com/onlinelabel/?qt=tile&udt=20160514&styles=pl&scaler=1&p=1&x="+f+"&y="+g+"&z="+e}return layerurl}})})};
/*!create by scy 2016-11-11*/
ol.source.getBaseLayerSource=function(a,b,c){var d;return"offline"==a?("road"==c?d=b+"/roadmap/{z}/{x}/{y}.png":"sate"==c?d=b+"/satellite/{z}/{x}/{y}.png":"terr"==c&&(d=b+"/terrain/{z}/{x}/{y}.png"),new ol.source.XYZ({url:d})):"googlemap"==b?("road"==c?d="http://mt3.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}":"sate"==c?d="http://mt3.google.cn/vt/lyrs=s&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}":"terr"==c&&(d="http://mt3.google.cn/vt/lyrs=p&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}"),new ol.source.XYZ({url:d})):"tianditu"==b?("road"==c?d="http://t3.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}":"sate"==c?d="http://t3.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}":"terr"==c&&(d="http://t3.tianditu.com/DataServer?T=ter_c&x={x}&y={y}&l={z}"),new ol.source.XYZ({url:d})):"baidumap"==b?getBaiduSource(c):void 0},ol.source.getBaiduSource=function(a){for(var b=ol.proj.get("EPSG:3857"),c=[],d=0;22>d;d++)c[d]=Math.pow(2,18-d);var e=new ol.tilegrid.TileGrid({origin:[0,0],resolutions:c});return bdsource=new ol.source.TileImage({projection:b,tileGrid:e,tileUrlFunction:function(b,c,d){if(!b)return"";var e=b[0],f=b[1],g=b[2];switch(0>f&&(f="M"+-f),0>g&&(g="M"+-g),a){case"road":layerurl="http://online3.map.bdimg.com/onlinelabel/?qt=tile&udt=20160514&styles=pl&scaler=1&p=1&x="+f+"&y="+g+"&z="+e;break;case"sate":layerurl="http://shangetu1.map.bdimg.com/it/u=x="+f+";y="+g+";z="+e+";v=009;type=sate&fm=46&udt=20150601";break;default:layerurl="http://online3.map.bdimg.com/onlinelabel/?qt=tile&udt=20160514&styles=pl&scaler=1&p=1&x="+f+"&y="+g+"&z="+e}return layerurl}})};
/*!create by scy 2016-11-11*/
ol.OL3_LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAnCAYAAACSamGGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDM0MiwgMjAxMC8wMS8xMC0xODowNjo0MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2MkUwMjc4MTVFQkIxMUU2QjIwQjk3NEM5QTFFRTZFQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2MkUwMjc4MjVFQkIxMUU2QjIwQjk3NEM5QTFFRTZFQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjYyRTAyNzdGNUVCQjExRTZCMjBCOTc0QzlBMUVFNkVDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjYyRTAyNzgwNUVCQjExRTZCMjBCOTc0QzlBMUVFNkVDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++jSynwAACUhJREFUeNrMWXt0VEcd/u7dm+wmWfIk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",ol.OL3_URL="http://www.ssd.net.cn",ol.ssdlogo={href:ol.OL3_URL,src:ol.OL3_LOGO_URL},ol.source.createTileBaseMap=function(a,b,c,d,e,f){var g=ol.layer.TileBaseLayer(f.ltype,f.base,f.mtype),h=new ol.View({center:ol.proj.transform(b,"EPSG:4326","EPSG:3857"),zoom:c,maxZoom:d,minZoom:e,projection:"EPSG:3857"}),i=new ol.Map({view:h,layers:[g],target:a,logo:ol.ssdlogo});return i},ol.source.createWmsBaseMap=function(a,b,c,d,e,f){var g=(ol.layer.WMSBaseLayer(f.url,f.layername),new ol.View({center:b,zoom:c,maxZoom:d,minZoom:e,projection:"EPSG:4326"})),h=new ol.Map({view:g,layers:[tiledLayer],target:a,logo:ol.ssdlogo});return h};
/*!create by scy 2016-11-11*/
ol.control.addMeasureTool=function(a,b){function c(){var c="area"==b?"Polygon":"LineString";q=new ol.interaction.Draw({source:g,type:c,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new ol.style.Circle({radius:5,stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 0.7)"}),fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"})})})}),a.addInteraction(q),e(),d();var f;q.on("drawstart",function(a){i=a.feature;var b=a.coordinate;f=i.getGeometry().on("change",function(a){var c,d=a.target;d instanceof ol.geom.Polygon?(c=s(d),b=d.getInteriorPoint().getCoordinates()):d instanceof ol.geom.LineString&&(c=r(d),b=d.getLastCoordinate()),l.innerHTML=c,m.setPosition(b)})},this),q.on("drawend",function(){l.className="ol-measure-tooltip ol-measure-tooltip-static",m.setOffset([0,-7]),i=null,l=null,e(),ol.Observable.unByKey(f)},this)}function d(){j&&j.parentNode.removeChild(j),j=document.createElement("div"),j.className="ol-measure-tooltip hidden",k=new ol.Overlay({element:j,offset:[15,0],positioning:"center-left"}),a.addOverlay(k)}function e(){l&&l.parentNode.removeChild(l),l=document.createElement("div"),l.className="ol-measure-tooltip ol-measure-tooltip-measure",m=new ol.Overlay({element:l,offset:[0,-15],positioning:"bottom-center"}),a.addOverlay(m)}var f=new ol.Sphere(6378137),g=new ol.source.Vector,h=new ol.layer.Vector({source:g,layerid:"measurelayer",style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})});a.addLayer(h);var i,j,k,l,m,n="点击测量面积",o="点击测量距离",p=function(a){if(!a.dragging){var b="点击开始测量";if(i){var c=i.getGeometry();c instanceof ol.geom.Polygon?b=n:c instanceof ol.geom.LineString&&(b=o)}j.innerHTML=b,k.setPosition(a.coordinate),$(j).removeClass("hidden")}};a.on("pointermove",p),a.on("pointermove",function(){});$(a.getViewport()).on("mouseout",function(){$(j).addClass("hidden")});var q,r=function(b){var c,d=b.getCoordinates();c=0;for(var e=a.getView().getProjection(),g=0,h=d.length-1;h>g;++g){var i=ol.proj.transform(d[g],e,"EPSG:4326"),j=ol.proj.transform(d[g+1],e,"EPSG:4326");c+=f.haversineDistance(i,j)}var k;return k=c>100?Math.round(c/1e3*100)/100+" km":Math.round(100*c)/100+" m"},s=function(b){var c,d=a.getView().getProjection(),e=b.clone().transform(d,"EPSG:4326"),g=e.getLinearRing(0).getCoordinates();c=Math.abs(f.geodesicArea(g));var h;return h=c>1e4?Math.round(c/1e6*100)/100+" km<sup>2</sup>":Math.round(100*c)/100+" m<sup>2</sup>"};b.onchange=function(){a.removeInteraction(q),c()},c()};
/*!create by scy 2016-11-11*/
ol.control.initPopup=function(a,b,c,d){var e=void 0==$("#"+b)[0]?$('<div id="popup" class="ol-popup"/>').appendTo($("body"))[0]:$("#"+b)[0],f=void 0==$("#"+d)[0]?$('<a id="popup-closer" class="ol-popup-closer"/>').appendTo(e)[0]:$("#"+d)[0],g=(void 0==$("#"+c)[0]?$('<div id="popup-content" class="small"/>').appendTo(e)[0]:$("#"+c)[0],new ol.Overlay({id:"featurepopupid",element:void 0==$("#"+b)[0]?e:$("#"+b)[0],autoPan:!0,autoPanAnimation:{duration:250}}));return f.onclick=function(){g.setPosition(void 0),f.blur(),$.each(a.getInteractions().getArray(),function(a,b){b.constructor==ol.interaction.Select&&b.getFeatures().clear()})},a.addOverlay(g),g};
/*!create by scy 2016-11-11*/
ol.control.ssdlogo={href:"http://www.ssd.net.cn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAnCAYAAACSamGGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDM0MiwgMjAxMC8wMS8xMC0xODowNjo0MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2MkUwMjc4MTVFQkIxMUU2QjIwQjk3NEM5QTFFRTZFQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2MkUwMjc4MjVFQkIxMUU2QjIwQjk3NEM5QTFFRTZFQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjYyRTAyNzdGNUVCQjExRTZCMjBCOTc0QzlBMUVFNkVDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjYyRTAyNzgwNUVCQjExRTZCMjBCOTc0QzlBMUVFNkVDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++jSynwAACUhJREFUeNrMWXt0VEcd/u7dm+wmWfIkCYTQkAQICQLhUZQAUsRy0BxFKS0WKtW2pwg9lXos2B6xKH3go9B6VCLUgg9KS+tRWkqRQmOrHCoIiJBAwBDyME/Ic5Pse9dvJneT3SSbvfQvZ8/HbO7dmfnN7/f9HjMofr8f/+9NE/9krH77k4xNJz5HLCCmEya9D7R/6f054hRRSty63UUaDizvE1JRlNsZt4jYRBRH+N2CoH4j4SWOEM8TZ25nQbWvU4yggHiX+JAoNjgmGNS08mXiNPEWMdHYOF1IockIeI4oJ4qDnws2O90+9Di8Er1OL7w+Tsp3Pr50uAbe2fld0F8fu5KoIJ6KtHY/J0doVuL3xFcDD8QwIZzD5YXFbMKdk5ORlmSG1+uXz6/UdqGqsQcp8dHyXZI1moL74KHUZTc60dbtkpvQObydoIWwjrCP6DiKog73LpX4gJg28IjaozqcHh+WF2XiobsnQDP1aW1uXhIOn27Ctteu4JtLc7BmcSY8ZGF0lIrC3AT87kQtymu6uUMVihriA18n8oilRGdYIQO2D2oJxPuhAvZp0Onx46GlEyhIFn75ThWOnGnC5nsnobq5F4+XXMDT9+Xhi3PHYPvBq/h72S28tG4G+1a8cLACJm7IZDLpM4W0ucRRYslwGu1ToVB/KHYThYOfe2jS7PQ4KeTmV8vwm2PViIvRMC8/BSXvVWF6dqIUcO2Oczj0cSPGpsQgKy0W+47XSH6ZVFX3B2U4zCNeHvI8jOOsJlYNR2I/V5iaFY+mdgfO/qcT8bFRiNZUyTGb3Ys5k5NQXmvD9YYeWCm8WTNJeri4OVVVjDjoo4OdM0iTagDRxPagv4egl14azcUtlihpusYONyop1P2LxqOjxwMzOahFadA0Ddeb7ehx+rBifgZsDj9GmjcIPyVM/X/3a3Lgs5G4Q8HwH43aKK/tRpxFw+ycBLi9ffTaeagKy2anoTA7ASmjzJg0Ng4uNx2MePFPlXh02QQ8cNd4dNsZn/zhZu//FBAPB/4abO6YSHFLo2mb251462QDNq3Mpbk1aepr1OR3XinHp6ckYRY9eePyHGlesanTVzuwae9l+fu1SzIZL72SaxHM/gxhCjG3X/CNPCSS9e9yIv8gCPVbzBr2fVCPpjYXdm2YTrNTUDrExepuPFZSjpqbdty3MANb7p/MHEO+0nLHL7Tiyb1X8MRXclA0NUVGCP8w8wdhHFHsD3EcdsRKve+HiGkOpx+95FOvsw9ON5hBfFhfchm3utzY/dh0ZKXGMR5q5KYdz79RibIaG6NALHY8XMBgboaF7z661I4/lNZj3bIsahMDc7J3uftkUEPXX6XoLqPpjmPSC4f+5qRH5qRZsKIoHT5Ga5Hu+kM6N+hiOqxibLx75mjs3TgNa3ZeQkObE+dv9KCz10tauHAPx45m5vnWrssc5MXhM7fwtc+OxbMPTJKpUlAlSmNk6PVg/0dNnNMbXOwsCgnm5PI0PQUOBFBuosXmZmpLxMKCxLB5U+Tj9MRoPLJ0HJ45UAmP38eUGIX5+ePk+yUzUrBywRjG0Tq+8yM1wYxvfykrZI6XD9eg2+mhwCGZT0yQTdzQHUfNE6kxGBrDi43euGnfNdTddIQVMrDxz0xJZLBX8IVZqcgbFxfym1k58RTARC1mICE2tFw4eo5Z6e06uZ46SAYh10Duhpo6nACWKIUmdeIHB6qwe8MUGQMDzUXy+6iZQBpOiotCyfp8FM8ZDY9wjKDUl50ew/H5WDYrBcGla3WLAz98oxpuDzi3KVz9EBBSsYZTU5xZ5W5bsef9BjxenNn/qozFwrNvVsPKSkiEGxMRZzGh9GKHTJ/B+d5LTmemmGn65AHOk9PbKOCNJruMu0r4KizgOBjRnGKXvzpSj5nZVizQ+VkwPg456Ra8eqJRBl2hdX+Q+QMVk6gj47iRnzyYG2LqPccacPT8rT4BFSOVuaJ0hkn6Ehr5JDx26+vVaOpwySFeCrBlVTZ+vX4KivITZIpU1AE+iXGxFGBFURpef7JA9kJg0U5e6cIv3msgTzU5ZoS1O4NDUH2kc4ZY8FqTE2teqkAuOeZhIetgXk5nwfuNJRmw0tRX6nrQxvwteJqRbEbuGAtutDix/2838cqJZub8Pm1frO6Bg7FR6/fmsKqsDyp6latGDkRRrAfL63pROMGKBxdnSDOWUbBLNT146p7x9OwkyUdRCItWUW/HP67asHZxOtISotFu8+C5P9YynroRa1aNLCnlUgRvctefFd9bAt40UhO/H8UyTGgpZZSGyRmxmJNrRTs1eL7KhlZmIRGQs1ItKMyxSqFPVXRSMBcrJheLYycjg8/ICbWSmHS9ZE5/CBLdcWJ1pJFi7labF5nJfiyfm4qaFjsdoB3JVg13ToynA6nSeMLsp8g9IeTU8VZMyfRjx6EG2J2QMdNAO96/ptDMxA3yHC/O0e8aPQuLNDkmMQrz8qwyDoqYeZOaEhlIxEgREVL5vpd5/jIpcvZ6t0wOgoYG70yKiI8rd80MpEWpyb/oKp5oZAYxpKnTQ4fRCFEdqdRWDFo6ReGrICHGhAbmb8FbX51CzfrkocxnTMALQsBBp0XJD1HCbiVeMyQkh5BaOHaxC3dNHSU9VxQMo+M1ebz9N51EOFpjuxtnKnukgKrxm5ItQ+JkULF5gDhn4CwiEcV68b9tQohezM+Lx/SsWHT1+uRRdmH+KBns/1pu45HDLw9hBuctJY4MvRzwh+zwCeJD/fAescWQe41tHgbnZnx+Rjym3REDB1V8qqIHpZe6AF9fhW6QiCJTfDfM5UCIkCeJHxPfN2R2cZvBs0xdqxuLPxXPGBojn/c4WlFT6oYlWoVq/D7saZ2Pw11YDWmCmweNziz42EEzf29/PTp5tD1LDr74TrMsaG/jwm4PsTPsDYZfHSKrcKK1uslXGtGmxQxcrnfiR282oZ487bT7mVVMRsPNb4kNI98FDZ87BT/u1c3+nCF+Rms49E+brOpjmcuFhBEU6dU5+POIN70RUpS49OQhBbuNpE1NC9ryyBKK4uERPT4buUSN2P5M5Ohc7Y5k+ghNlF+bRV42IuBIF1bDoZvYRuTofa3BcQFcJbbo439G2A2NG+DkbbWbuka36veK4k58tu5khXov+HxJ78/pYa3yk/7vw/8EGACjq1uiQYi8HgAAAABJRU5ErkJggg=="},ol.control.initLogo=function(){var a=document.createElement("a");a.href="http://www.ssd.net.cn",a.target="_blank";var b=document.createElement("img");return b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAnCAYAAACSamGGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDM0MiwgMjAxMC8wMS8xMC0xODowNjo0MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2MkUwMjc4MTVFQkIxMUU2QjIwQjk3NEM5QTFFRTZFQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2MkUwMjc4MjVFQkIxMUU2QjIwQjk3NEM5QTFFRTZFQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjYyRTAyNzdGNUVCQjExRTZCMjBCOTc0QzlBMUVFNkVDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjYyRTAyNzgwNUVCQjExRTZCMjBCOTc0QzlBMUVFNkVDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++jSynwAACUhJREFUeNrMWXt0VEcd/u7dm+wmWfIk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",a.appendChild(b),a};
/*!create by scy 2016-11-11*/
ol.source.createTiledMap=function(a,b,c,d,e,f){var g=new ol.layer.Tile({source:new ol.source.XYZ({url:b+"/"+c+"/{z}/{x}/{y}."+d}),name:"baselyaer"}),h=new ol.View({center:ol.proj.transform(e,"EPSG:4326","EPSG:3857"),zoom:f,maxZoom:18,minZoom:0}),i=new ol.Map({view:h,layers:[g],target:a});return i};
/*!create by scy 2016-11-11*/
ol.commonUtil={},ol.commonUtil.pointToGeoJSON=function(a,b,c){for(var d={type:"FeatureCollection",features:[]},e=0;e<a.length;e++){var f={type:"Feature",properties:{},geometry:{}},g={type:"Point",coordinates:[a[e][b],a[e][c]]};f.geometry=g;for(var h in a[e])f.properties[h]=a[e][h];d.features.push(f)}return d},ol.commonUtil.getDailyPrec=function(a,b){var c=[255,255,255];return.1<=parseFloat(a)&&parseFloat(a)<10?c=[250,254,205]:10<=parseFloat(a)&&parseFloat(a)<25?c=[206,252,209]:25<=parseFloat(a)&&parseFloat(a)<50?c=[149,248,205]:50<=parseFloat(a)&&parseFloat(a)<100?c=[88,238,243]:100<=parseFloat(a)&&parseFloat(a)<200?c=[87,211,252]:200<=parseFloat(a)&&(c=[37,166,239]),b&&c.push(b),c},ol.commonUtil.getMonthPrec=function(a){var b=[255,255,255];return.1<=parseFloat(a)&&parseFloat(a)<=9.9?b=[166,251,214]:10<=parseFloat(a)&&parseFloat(a)<=49.9?b=[88,238,243]:50<=parseFloat(a)&&parseFloat(a)<=99.9?b=[87,211,252]:100<=parseFloat(a)&&parseFloat(a)<=200?b=[37,166,239]:200<=parseFloat(a)&&parseFloat(a)<=300?b=[14,118,236]:300<=parseFloat(a)&&parseFloat(a)<=400?b=[54,80,240]:400<=parseFloat(a)&&parseFloat(a)<=800?b=[86,31,226]:800<parseFloat(a)&&(b=[59,25,187]),b},ol.commonUtil.getSeasonalPrec=function(a){var b=[255,255,255];return.1<=parseFloat(a)&&parseFloat(a)<=9.9?b=[166,251,214]:10<=parseFloat(a)&&parseFloat(a)<=49.9?b=[88,238,243]:50<=parseFloat(a)&&parseFloat(a)<=99.9?b=[87,211,252]:100<=parseFloat(a)&&parseFloat(a)<=200?b=[37,166,239]:200<=parseFloat(a)&&parseFloat(a)<=400?b=[74,97,238]:400<=parseFloat(a)&&parseFloat(a)<=600?b=[74,44,222]:600<=parseFloat(a)&&parseFloat(a)<=1e3?b=[59,25,187]:1e3<parseFloat(a)&&(b=[64,8,166]),b},ol.commonUtil.getYearPrec=function(a){var b=[255,255,255];return.1<=parseFloat(a)&&parseFloat(a)<=49.9?b=[101,242,247]:49.9<=parseFloat(a)&&parseFloat(a)<=99.9?b=[87,211,252]:100<=parseFloat(a)&&parseFloat(a)<=500?b=[56,81,235]:500<=parseFloat(a)&&parseFloat(a)<=1e3?b=[59,25,187]:1e3<=parseFloat(a)&&parseFloat(a)<=2e3?b=[63,6,157]:2e3<=parseFloat(a)&&(b=[62,3,128]),b},ol.commonUtil.getTemp=function(a){var b=[255,255,255];return parseFloat(a)<-48&&(b=[51,13,128]),-48<=parseFloat(a)&&parseFloat(a)<-44?b=[70,33,146]:-44<=parseFloat(a)&&parseFloat(a)<-40?b=[84,64,182]:-40<=parseFloat(a)&&parseFloat(a)<-36?b=[67,73,201]:-36<=parseFloat(a)&&parseFloat(a)<-32?b=[77,102,210]:-32<=parseFloat(a)&&parseFloat(a)<-28?b=[87,117,213]:-28<=parseFloat(a)&&parseFloat(a)<-24?b=[79,151,225]:-24<=parseFloat(a)&&parseFloat(a)<-20?b=[132,185,251]:-20<=parseFloat(a)&&parseFloat(a)<-16?b=[108,198,236]:-16<=parseFloat(a)&&parseFloat(a)<-12?b=[115,225,231]:-12<=parseFloat(a)&&parseFloat(a)<-8?b=[171,247,235]:-8<=parseFloat(a)&&parseFloat(a)<-4?b=[203,251,218]:-4<=parseFloat(a)&&parseFloat(a)<0?b=[238,253,202]:0<=parseFloat(a)&&parseFloat(a)<4?b=[249,250,213]:4<=parseFloat(a)&&parseFloat(a)<8?b=[252,242,172]:8<=parseFloat(a)&&parseFloat(a)<12?b=[253,227,125]:12<=parseFloat(a)&&parseFloat(a)<16?b=[252,200,101]:16<=parseFloat(a)&&parseFloat(a)<20?b=[250,166,68]:20<=parseFloat(a)&&parseFloat(a)<24?b=[250,146,0]:24<=parseFloat(a)&&parseFloat(a)<28?b=[255,121,26]:28<=parseFloat(a)&&parseFloat(a)<32?b=[240,93,4]:32<=parseFloat(a)&&parseFloat(a)<36?b=[247,79,20]:36<=parseFloat(a)&&parseFloat(a)<40?b=[252,38,3]:40<=parseFloat(a)&&parseFloat(a)<44?b=[231,0,0]:44<=parseFloat(a)&&parseFloat(a)<48?b=[213,6,55]:48<=parseFloat(a)&&(b=[187,1,45]),b},ol.commonUtil.getDropTemp=function(a){var b=[255,255,255];return 0<=parseFloat(a)&&parseFloat(a)<4?b=[203,251,218]:4<=parseFloat(a)&&parseFloat(a)<8?b=[115,225,231]:8<=parseFloat(a)&&parseFloat(a)<12?b=[132,185,251]:12<=parseFloat(a)&&parseFloat(a)<16?b=[87,117,213]:16<=parseFloat(a)&&parseFloat(a)<20&&(b=[67,73,201]),b},ol.commonUtil.getDepartureTemp=function(a){var b=[255,255,255];return parseFloat(a)<-8&&(b=[55,20,208]),-8<=parseFloat(a)&&parseFloat(a)<-4?b=[2,92,226]:-4<=parseFloat(a)&&parseFloat(a)<-2?b=[75,171,245]:-2<=parseFloat(a)&&parseFloat(a)<-1?b=[134,232,250]:-1<=parseFloat(a)&&parseFloat(a)<-.5?b=[203,251,218]:-.5<=parseFloat(a)&&parseFloat(a)<0?b=[240,251,179]:0<=parseFloat(a)&&parseFloat(a)<.5?b=[252,245,163]:.5<=parseFloat(a)&&parseFloat(a)<1?b=[253,227,125]:1<=parseFloat(a)&&parseFloat(a)<2?b=[250,166,69]:2<=parseFloat(a)&&parseFloat(a)<4?b=[251,103,14]:4<=parseFloat(a)&&parseFloat(a)<8?b=[247,79,20]:8<=parseFloat(a)&&(b=[251,37,2]),b},ol.commonUtil.getSandWeather=function(a){var b=[255,255,255];switch(a){case"浮尘":b=[255,245,192];break;case"扬沙":b=[252,215,117];break;case"沙尘暴":b=[218,154,48];break;case"强沙尘暴":b=[158,98,38];break;case"特强沙尘暴":b=[113,73,33];break;default:b=[255,255,255]}return b},ol.commonUtil.getDisaster=function(a){var b=[255,255,255];switch(a){case"三级":b=[199,151,5];break;case"四级":b=[133,110,2];break;case"五级":b=[106,73,2];break;default:b=[255,255,255]}return b},ol.commonUtil.getFireDanger=function(a){var b=[255,255,255];switch(a){case"三级":b=[244,138,12];break;case"四级":b=[244,83,12];break;case"五级":b=[227,21,16];break;default:b=[255,255,255]}return b},Date.prototype.Format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},ol.commonUtil.accMul=function(a,b){var c,d=0,e=a.toString(),f=b.toString();return c=e.split("."),c[1]&&(d+=c[1].length),c=f.split("."),c[1]&&(d+=c[1].length),Number(e.replace(".",""))*Number(f.replace(".",""))/Math.pow(10,d)};
/*!create by scy 2016-11-11*/
ol.featureUtil={},ol.featureUtil.getDefaultFeatureStyle=function(a){var b;switch(a.getGeometry().getType()){case"Point":b=new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(10, 100, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"red",width:1})})});break;case"LineString":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"green",width:1})});break;case"MultiLineString":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"green",width:1})});break;case"MultiPoint":b=new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(10, 100, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"red",width:1})})});break;case"MultiPolygon":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"yellow",width:1}),fill:new ol.style.Fill({color:"rgba(255, 255, 0, 0.1)"})});break;case"Polygon":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"blue",lineDash:[4],width:3}),fill:new ol.style.Fill({color:"rgba(0, 0, 255, 0.1)"})});break;case"GeometryCollection":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"magenta",width:2}),fill:new ol.style.Fill({color:"magenta"}),image:new ol.style.Circle({radius:10,fill:null,stroke:new ol.style.Stroke({color:"magenta"})})});break;case"Circle":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"red",width:2}),fill:new ol.style.Fill({color:"rgba(255,0,0,0.2)"})})}return b},ol.featureUtil.getClusterDefaultStyle=function(a){var b=a.get("features").length;if(b>1){var c={},d=c[b];return d||(d=new ol.style.Style({image:new ol.style.Circle({radius:10,stroke:new ol.style.Stroke({color:"#fff"}),fill:new ol.style.Fill({color:"#3399CC"})}),text:new ol.style.Text({text:b.toString(),fill:new ol.style.Fill({color:"#fff"})})}),c[b]=d),d}var a=a.get("features")[0],d=new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(10, 100, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"red",width:1})})});return d},ol.featureUtil.getFilterFeatures=function(a,b){for(var c=a,d=b,e=[],f=0;f<c.length;f++)for(var g=0;g<d.length;g++)c[f].getGeometry().intersectsExtent(d[g].getGeometry().getExtent())&&e.push(d[g]);return e},ol.featureUtil.getSelectStyle=function(a){if(void 0!=a){var b;switch(a.getGeometry().getType()){case"Point":b=new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(10, 100, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"red",width:1})})});break;case"LineString":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"green",width:1})});break;case"MultiLineString":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"green",width:1})});break;case"MultiPoint":b=new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(10, 100, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"red",width:1})})});break;case"MultiPolygon":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"yellow",width:1})});break;case"Polygon":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"blue",lineDash:[4],width:3})});break;case"GeometryCollection":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"magenta",width:2}),fill:new ol.style.Fill({color:"magenta"}),image:new ol.style.Circle({radius:10,fill:null,stroke:new ol.style.Stroke({color:"magenta"})})});break;case"Circle":b=new ol.style.Style({stroke:new ol.style.Stroke({color:"red",width:2}),fill:new ol.style.Fill({color:"rgba(255,0,0,0.2)"})})}return b}};
/*!create by scy 2016-11-11*/
ol.mapUtil={},ol.mapUtil.getLayerById=function(a,b){var c;return $.each(a.getLayers().getArray(),function(a,d){d.constructor==ol.layer.Group?$.each(d.getLayers().getArray(),function(a,e){(void 0!=e.getProperties().layerid&&e.getProperties().layerid==b||d.get("layerid")==b)&&(c=e)}):(void 0!=d.getProperties().layerid&&d.getProperties().layerid==b||d.get("layerid")==b)&&(c=d)}),c},ol.mapUtil.setLayersVisiblity=function(a,b,c){$.each(a.getLayers().getArray(),function(a,d){d.constructor==ol.layer.Group?$.each(d.getLayers().getArray(),function(a,e){$.each(b,function(a,b){(void 0!=e.getProperties().layerid&&e.getProperties().layerid==b||d.get("layerid")==b)&&e.setVisible(c)})}):$.each(b,function(a,b){(void 0!=d.getProperties().layerid&&d.getProperties().layerid==b||d.get("layerid")==b)&&d.setVisible(c)})})},ol.mapUtil.clearSelectFeatures=function(a){for(i=0;i<a.getInteractions().getLength();i++){var b=a.getInteractions().getArray()[i];void 0!=b&&b.constructor===ol.interaction.Select&&b.getFeatures().clear()}},ol.mapUtil.removeOverlays=function(a,b){a.getOverlays().getLength();for(i=0;i<a.getOverlays().getLength();i++){var c=a.getOverlays().getArray()[i];void 0!=c&&c.getId()==b&&(a.removeOverlay(c),i--)}},ol.mapUtil.getSelectInteraction=function(a){var b;return $.each(a.getInteractions().getArray(),function(a,c){c.constructor==ol.interaction.Select&&(b=c)}),b},ol.mapUtil.addLabelToLayer=function(a,b,c){var d;$.each(a.getLayers().getArray(),function(a,c){(void 0!=c.getProperties().layerid&&c.getProperties().layerid==b||c.get("layerid")==b)&&(d=c)}),$.each(d.getSource().getFeatures(),function(a,b){if(void 0!=b.get(c)){var d;b.get(c).length>6&&(d=b.get(c).substr(0,b.get(c).length/2)+"\n"+b.get(c).substring(b.get(c).length/2)),b.setStyle(new ol.style.Style({text:new ol.style.Text({text:d,font:"13px 微软雅黑",fill:new ol.style.Fill({color:"#1E90FF"})}),fill:new ol.style.Fill({color:"#1E90FF"}),image:new ol.style.Circle({radius:4,fill:null,stroke:new ol.style.Stroke({color:"magenta"})})}))}})},ol.mapUtil.getLegend=function(a){for(var b=a.getControls().getLength(),c=0;b>c;c++)if(a.getControls().getArray()[c].constructor==ol.control.Legend)return a.getControls().getArray()[c]},ol.mapUtil.getDrawInteraction=function(a){var b;return $.each(a.getInteractions().getArray(),function(a,c){c.constructor==ol.interaction.Draw&&(b=c)}),b},ol.mapUtil.removeLayersById=function(a,b){$.each(a.getLayers().getArray(),function(c,d){$.each(b,function(b,c){d&&void 0!=d.getProperties().layerid&&d.getProperties().layerid==c&&a.removeLayer(d)})})};